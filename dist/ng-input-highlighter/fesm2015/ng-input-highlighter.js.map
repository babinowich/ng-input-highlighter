{"version":3,"file":"ng-input-highlighter.js.map","sources":["ng://ng-input-highlighter/lib/textComponents/text-regular.component.ts","ng://ng-input-highlighter/lib/textComponents/text-highlight.component.ts","ng://ng-input-highlighter/lib/textComponents/text.directive.ts","ng://ng-input-highlighter/lib/ng-input-highlighter.component.ts","ng://ng-input-highlighter/lib/ng-input-highlighter.module.ts"],"sourcesContent":["import { Component, Input } from '@angular/core';\nimport { TextComponent } from './text-block.component';\nimport { MenuItem } from '../classes/menuItem.class'\n\n@Component({\n    templateUrl: './text-regular.component.html'\n})\nexport class RegularComponent implements TextComponent {\n  @Input() text: string;\n  @Input() css: string\n  @Input() type = 'None'\n  @Input() confidence = null\n  @Input() menu: MenuItem;\n  @Input() data: any;\n\n}\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { TextComponent } from './text-block.component';\nimport { MatMenu } from '@angular/material/menu';\n\nimport { MenuItem } from '../classes/menuItem.class'\n@Component({\n    templateUrl: './text-highlight.component.html'\n})\nexport class HighlightedComponent implements TextComponent {\n  @Input() text: string;\n  @Input() css: string\n  @Input() type = 'None'\n  @Input() confidence = null\n  @Input() menu: MenuItem\n  @Input() data: any;\n  selected: string;\n  added = false\n  // @ViewChild('submenu')\n  // set subMenu(value: MatMenu)  {\n  //   this.text = value;\n  // }\n\n\n  clickedText(text) {\n      console.log('CLICKED:' + text  + ' ', this.text, this.css )\n      console.log(this.menu)\n    //   this.clickActive = this.clickActive ? false : true\n  }\n\n  changedText() {\n    console.log('selected replacement:', this.selected)\n    if (!this.added) {\n    const ogItem = {\n      viewValue: this.text,\n      value: this.text\n    }\n    this.menu.replacementOptions.push(ogItem)\n    this.added = true\n    }\n    this.text = this.selected\n  }\n}\n","import { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[libTextHost]',\n})\nexport class TextDirective {\n  constructor(public viewContainerRef: ViewContainerRef) { }\n}\n\n","import {\n  Component,\n  OnInit,\n  ComponentFactoryResolver,\n  ViewChild, Renderer2, ElementRef, AfterViewInit, Input, OnChanges, SimpleChanges, Output, EventEmitter } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { TextComponent } from './textComponents/text-block.component'\nimport { RegularComponent } from './textComponents/text-regular.component'\nimport { HighlightedComponent } from './textComponents/text-highlight.component'\nimport { TargetArrayItem } from './classes/targetTextItem.class';\nimport { TargetItem } from './classes/targetItems.class';\nimport { TextDirective } from './textComponents/text.directive'\n\n@Component({\n  selector: 'lib-ng-input-highlighter',\n  templateUrl: './ng-input-highlighter.html',\n  styleUrls: ['./ng-input-highlighter.css']\n})\n\nexport class NgInputHighlighterComponent implements OnInit, OnChanges, AfterViewInit {\n\n  @Input() targetItems: Array<TargetItem> = []; // analysis inside component: array of items to find\n  @Input() localAnalysis = true;\n  @Input() boxHeight = 'M';\n  // @Input() highContrast = true // TO-DO\n  @Input() idleTime = 2000 // allow for customization on debounce time\n  @Input() fontClass = 'regularText'; // optional class for input of style for regular text in box\n  @Input() boxClass = 'none';\n  @Input() boxFocus = 'focused';\n  @Input() initFocus = true; // allow for option to focus on component text box initially, recommended for accessibility\n  @Input() caseSensitive = false; // allow for option to select case sensitivity- default to off\n  @Output() currentText = new EventEmitter<string>(); // current text string, will output for analysis or other work outside\n\n  @ViewChild('textArea') textArea: ElementRef\n  @ViewChild('emptyText') emptyText: ElementRef\n  @ViewChild(TextDirective) targetText: TextDirective\n  @ViewChild('inputBox') inputBox: ElementRef;\n\n  private textSubject: Subject<string> = new Subject();\n  public responsePending = false;\n  public textArray: Array<TargetArrayItem> = []\n  public boxSize: String;\n\n  constructor(private componentFactoryResolver: ComponentFactoryResolver, private renderer: Renderer2) {\n  }\n\n  ngOnInit() {\n  // Timer to check when to send request to text analysis\n    this.textSubject.pipe(\n      debounceTime(2000)\n    ).subscribe(text => {\n      // console.log('idle and time to process', this.textArea)\n      this.responsePending = true\n      const new_text = this.obtainText()\n      this.targetText.viewContainerRef.clear()\n      this.currentText.emit(new_text);\n    // If we're doing local analysis, begin the process, otherwise- wait for response from service in onChanges\n      if (this.localAnalysis) {\n        this.constructLocally(new_text);\n        setTimeout(() => {\n          this.responsePending = false;\n          this.focusInput();\n        }, 500)\n      }\n    })\n\n    if (this.boxHeight === 'XS') {\n      this.boxSize = 'xsmall';\n    } else if (this.boxHeight === 'S') {\n      this.boxSize = 'small';\n    } else if (this.boxHeight === 'L') {\n      this.boxSize = 'large';\n    } else if (this.boxHeight === 'XL') {\n      this.boxSize = 'xlarge';\n    } else {\n      this.boxSize = 'medium';\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ((this.targetItems.length > 0) && (!this.localAnalysis)) {\n      if (changes.targetItems) {\n        console.log('new external target input received')\n        const new_text = this.obtainText()\n        this.targetText.viewContainerRef.clear()\n        this.currentText.emit(new_text)\n        this.constructExternally(new_text)\n        setTimeout(() => {\n          this.responsePending = false;\n          this.focusInput();\n        }, 500)\n      }\n    }\n  }\n\n  ngAfterViewInit() {\n    // Add event listeners to the DOM elements after rendered, allowing for box-border\n    this.renderer.listen(this.targetText.viewContainerRef.element.nativeElement, 'focus', () => {\n      this.renderer.addClass(this.inputBox.nativeElement, this.boxFocus);\n    });\n    this.renderer.listen(this.targetText.viewContainerRef.element.nativeElement, 'blur', () => {\n      this.renderer.removeClass(this.inputBox.nativeElement, this.boxFocus);\n    });\n    // Method called upon a keystroke to begin the process of waiting for a 2 second pause in keystrokes\n    this.renderer.listen(this.textArea.nativeElement, 'keyup', () => {\n      console.log('keystroke')\n      this.textSubject.next();\n    });\n    // Focus the caret at the end of the box\n    if (this.initFocus) {\n      this.focusInput();\n    }\n  }\n\n  obtainText() {\n    console.log('target', this.targetText)\n    if (this.textArea.nativeElement.childElementCount < 2) {\n      console.log('one child element', this.textArea.nativeElement.childElementCount)\n      const text = this.textArea.nativeElement.innerText\n      console.log(this.textArea)\n      console.log('text obtained', text)\n      return text\n    } else {\n      console.log('lots of children elements', this.textArea.nativeElement.childElementCount)\n      const childNodes = this.textArea.nativeElement.childNodes\n      let newText = ''\n      console.log(this.textArea)\n\n      if (this.textArea.nativeElement.childNodes.length > 1) {\n        if (this.textArea.nativeElement.childNodes[1].localName === 'br') {\n          console.log('br exists- killing it')\n          this.textArea.nativeElement.removeChild(this.textArea.nativeElement.childNodes[1])\n        }\n        if (this.textArea.nativeElement.childNodes[1].nodeName === '#text') {\n          console.log('clean delete- text exists in [1] exists- extracting it')\n          const temp = this.textArea.nativeElement.childNodes[1].textContent\n          this.textArea.nativeElement.removeChild(this.textArea.nativeElement.childNodes[1])\n          if (this.textArea.nativeElement.childNodes[1].localName === 'br') {\n            console.log('a new br exists- killing it')\n            this.textArea.nativeElement.removeChild(this.textArea.nativeElement.childNodes[1])\n          }\n          console.log('text obtained', temp)\n          return temp\n        }\n      }\n      for (let i = 0; i < childNodes.length; i++) {\n        if (childNodes[i].innerText) {\n          newText = newText + ' ' + childNodes[i].innerText\n        }\n      }\n      console.log('text obtained', newText)\n      return newText\n    }\n  }\n\n  renderComponents(textArray) {\n    setTimeout(() => {\n      console.log('in render', this.textArea)\n      const targetRef = this.targetText\n      this.textArea.nativeElement.firstChild.textContent = ''\n\n      console.log('render array', textArray)\n      const testMenu = {\n        replacementOptions: [\n          { viewValue: 'Sushi', value: 'sushi' },\n          { viewValue: 'Pizza', value: 'pizza' },\n          { viewValue: 'Hot Dogs', value: 'hot dogs' }\n        ],\n        descriptionItems: [\n          'Suggested replacements'\n        ]\n      }\n      for (let i = 0; i < textArray.length; i++) {\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(textArray[i].component)\n        const ref = targetRef.viewContainerRef.createComponent(componentFactory);\n        const el = this.targetText.viewContainerRef.element;\n        (<TextComponent>ref.instance).text = textArray[i].text;\n        (<TextComponent>ref.instance).css = textArray[i].css;\n        (<TextComponent>ref.instance).type = textArray[i].type;\n        (<TextComponent>ref.instance).confidence = textArray[i].confidence;\n        (<TextComponent>ref.instance).menu = textArray[i].menu;\n        (<TextComponent>ref.instance).data = textArray[i];\n\n        this.renderer.appendChild(el.nativeElement, ref.location.nativeElement)\n      }\n    })\n  }\n\n\n  // Method to construct the html string from an input text array without locations\n  constructLocally(text) {\n    console.log('in construct locally')\n    const analysisOutput = localAnalysis(this.targetItems, text, this.caseSensitive);\n    this.renderComponents(analysisOutput)\n  }\n\n  // Method to construct the html string from an input text array with locations\n  constructExternally(text) {\n    console.log('in construct externally')\n    constructComponentArray(this.targetItems, text)\n  }\n\n  // ACCESSIBILITY\n  // Method to direct the focus of any click to the desired location\n  focusInput() {\n    console.log('focus');\n    if (this.textArea) {\n      this.textArea.nativeElement.focus();\n      this.placeCaretAtEnd(this.textArea.nativeElement);\n    }\n  }\n\n  // Method to place the caret focus at the end of the last item of the text array\n  placeCaretAtEnd(el) {\n    el.focus();\n    if (typeof window.getSelection !== 'undefined'\n      && typeof document.createRange !== 'undefined') {\n      const range = document.createRange();\n      range.selectNodeContents(el);\n      range.collapse(false);\n      const sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n  }\n\n  // Method called to select all text in box if double clicked anywhere in the box\n  selectAll() {\n    document.execCommand('selectAll', false, null);\n  }\n}\n\n// all good here, needs to still look for the items locally and send out that to text array\nfunction localAnalysis(searchTargets, str, caseSensitive) {\n  console.log('in local analysis')\n  const output = [];\n  for (const item of searchTargets) {\n    let startIndex = 0;\n    let index;\n    const searchStrLen = item.text.length;\n    if (searchStrLen === 0) {\n        return 'An error occurred. There appears to be no input search string.';\n    }\n    let searchingString;\n    let searchingText;\n    if (!caseSensitive) {\n      searchingString = str.toLowerCase();\n      searchingText = item.text.toLowerCase();\n    } else {\n      searchingString = str;\n      searchingText = item.text;\n    }\n    while ((index = searchingString.indexOf(searchingText, startIndex)) > -1) {\n      const indexItem = {\n        text: str.substring(index, index + searchStrLen),\n        location: [index, index + searchStrLen],\n        menu: item.menu ? item.menu : null,\n        type: item.type ? item.type : null,\n        confidence: null,\n        css: item.css\n      }\n      output.push(indexItem);\n      startIndex = index + searchStrLen;\n    }\n  }\n  console.log('output from local: ', output)\n  return constructComponentArray(output, str);\n}\n\n\n// CHANGE THIS to make complete text array\n// take in targets found and indices of all, create a large text array with non-target text\n// append type of component to it (RegularComponent or HighlightedComponent)\nfunction constructComponentArray(searchResults, original_text) {\n  console.log('in construct array')\n  const finalArray = []\n  let locationChecker = true;\n  const erroredItems = [];\n  if (searchResults.length === 0) {\n    const onlyItem =  {\n      text: original_text,\n      css: null,\n      menu: null,\n      type: null,\n      confidence: null,\n      component: RegularComponent\n    }\n    finalArray.push(onlyItem)\n    return finalArray\n  } else {\n    for (const item of searchResults) {\n      if (!item.location) {\n        erroredItems.push(item);\n        locationChecker = false;\n      }\n    }\n    if (!locationChecker) {\n      let erroredItemsText = ''\n      for (const item of erroredItems) {\n        erroredItemsText = erroredItemsText + item.text + '  ';\n      }\n      const errorText = 'An error occured. The following items did not have a valid identified index location: ' + erroredItemsText\n      + 'Either provide proper index locations of each item to be highlighted or set localAnalysis to true.';\n      const errorItem =  {\n        text: errorText,\n        css: null,\n        menu: null,\n        type: null,\n        confidence: null,\n        component: RegularComponent\n      }\n      finalArray.push(errorItem)\n      return finalArray\n    }\n  }\n  searchResults.sort(function(a, b) {\n    return a.location[0] - b.location[0];\n  })\n  let start = 0;\n  let end = searchResults[0].location[0];\n  let middle = '';\n  for (let i = 0; i < searchResults.length; i++) {\n    if (start === 0) {\n      const startItem = {\n        text: original_text.substring(start, end),\n        css: null,\n        menu: null,\n        type: null,\n        confidence: null,\n        component: RegularComponent\n      }\n      finalArray.push(startItem)\n      const firstItem = {\n        text: searchResults[i].text,\n        css: searchResults[i].css,\n        menu: searchResults[i].menu ? searchResults[i].menu : null,\n        type: searchResults[i].type ? searchResults[i].type : null,\n        confidence: null,\n        component: HighlightedComponent\n      }\n      finalArray.push(firstItem)\n      end = searchResults[i].location[1];\n    } else {\n      const nextItem = {\n        text: searchResults[i].text,\n        css: searchResults[i].css,\n        menu: searchResults[i].menu ? searchResults[i].menu : null,\n        type: searchResults[i].type ? searchResults[i].type : null,\n        confidence: null,\n        component: HighlightedComponent\n      }\n      finalArray.push(nextItem)\n    }\n\n    if (searchResults[i + 1]) {\n      middle = original_text.substring(searchResults[i].location[1], searchResults[i + 1].location[0]);\n      const middleItem = {\n        text: middle,\n        css: null,\n        menu: null,\n        type: null,\n        confidence: null,\n        component: RegularComponent\n      }\n      finalArray.push(middleItem)\n      start = searchResults[i + 1].location[0];\n      end = searchResults[i + 1].location[1];\n    }\n\n    if (i === (searchResults.length - 1)) {\n      const endItem = {\n        text: original_text.substring(end, original_text.length),\n        css: null,\n        menu: null,\n        type: null,\n        confidence: null,\n        component: RegularComponent\n      }\n      finalArray.push(endItem)\n    }\n  }\n  console.log('output of array construction:', finalArray)\n  return finalArray;\n}\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgInputHighlighterComponent } from './ng-input-highlighter.component';\nimport { TextDirective } from './textComponents/text.directive'\nimport { HighlightedComponent } from './textComponents/text-highlight.component'\nimport { RegularComponent } from './textComponents/text-regular.component'\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatFormFieldModule } from '@angular/material/form-field';\n\n@NgModule({\n  imports: [\n    BrowserModule,\n    MatMenuModule,\n    MatSelectModule,\n    MatFormFieldModule\n  ],\n  declarations: [\n    NgInputHighlighterComponent,\n    TextDirective,\n    HighlightedComponent,\n    RegularComponent\n  ],\n  entryComponents: [ HighlightedComponent, RegularComponent],\n  exports: [NgInputHighlighterComponent]\n})\nexport class NgInputHighlighterModule { }\n"],"names":[],"mappings":"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"}
